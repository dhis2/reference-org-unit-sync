- route:
    id: syncChangeRoute
    routeConfigurationId: deadLetterQueueRouteConfig
    logMask: true
    from:
      uri: jms:queue:sync?transacted=true
      steps:
        - choice:
            when:
              - simple: "${headers.DebeziumOperation} != 'd' && ${headers.DebeziumIdentifier} == 'dhis2.public.organisationunit'"
                steps:
                  - to: direct:syncOrgUnitCreateOrUpdate
              - simple: "${headers.DebeziumOperation} == 'c' && ${headers.DebeziumIdentifier} == 'dhis2.public.deletedobject'"
                steps:
                  - to: direct:syncOrgUnitDelete
              - simple: "${headers.DebeziumOperation} != 'd' && ${headers.DebeziumIdentifier} == 'dhis2.public.orgunitgroup'"
                steps:
                  - to: direct:syncOrgUnitGroupCreateOrUpdate
              - simple: "${headers.DebeziumOperation} != 'd' && ${headers.DebeziumIdentifier} == 'dhis2.public.orgunitgroupset'"
                steps:
                  - to: direct:syncOrgUnitGroupSetCreateOrUpdate